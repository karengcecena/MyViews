{% extends 'base.html' %}

{% block title %} All Media {% endblock %}

{% block body %} 

    <nav>
    <ul>
        <li class="medialogo">MyViews</li>
        <li><a href="/media-search-results-react">Search</a></li>
        <li><a href="/user-profile">Profile</a></li>
        <li><a class="active" href="/search-friends">Friends</a></li>
        <li><a href="/recommended">Your Recommended</a></li>
        <li><a href="/logout">Logout</a></li>
        </ul>
    </nav>


    <h1> {{ user2.username }} </h1>
    <input type="hidden" id="user2_id" value="{{ user2.user_id }}">

    {% if user2 in user.following %}
        
        <button type="button" class="follow-btns" id="unfollow-btn">Unfollow</button>
    
    {% else %}
    
        <button type="button" class="follow-btns" id="follow-btn">Follow</button>

    {% endif %} 


    <div>
        <div class="row">
        <h2>Watched List:</h2>
        <!-- <ul> -->
        {% for media in user2.watched_list %}
            <!-- <li> -->
                <div class="col">
                <a href="/media-info/{{ media.media_type }}/{{ media.TMDB_id }}" >{{ media.title }}</a>
                {% for rating in media.ratings %}
                    {% if rating.user_id == user2.user_id %}
                        {% if rating.score == 1 %}
                            <div class="star">★</div>
                        {% elif rating.score == 2 %}
                            <div class="star">★★</div>
                        {% elif rating.score == 3 %}
                            <div class="star">★★★</div>
                        {% elif rating.score == 4 %}
                            <div class="star">★★★★</div>
                        {% elif rating.score == 5 %}
                            <div class="star">★★★★★</div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <img src="https://image.tmdb.org/t/p/original{{ media.poster_path }}">
                </div>
            <!-- </li> -->
        {% endfor %}
        </div>
        <!-- </ul> -->
    </div>

    <div>
        <div class="row">
        <h2>To Be Watched List:</h2>
        <!-- <ul> -->
        {% for media in user2.to_be_watched_list %}
            <!-- <li> -->
                <div class="col">
                <a href="/media-info/{{ media.media_type }}/{{ media.TMDB_id }}" >{{ media.title }}</a>
                {% for rating in media.ratings %}
                    {% if rating.user_id == user2.user_id %}
                        {% if rating.score == 1 %}
                        <div class="star">★</div>
                        {% elif rating.score == 2 %}
                            <div class="star">★★</div>
                        {% elif rating.score == 3 %}
                            <div class="star">★★★</div>
                        {% elif rating.score == 4 %}
                            <div class="star">★★★★</div>
                        {% elif rating.score == 5 %}
                            <div class="star">★★★★★</div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <img src="https://image.tmdb.org/t/p/original{{ media.poster_path }}">
                </div>
            <!-- </li> -->
        {% endfor %}
         </div>
        <!-- </ul> -->
    </div>

    <div>
        <div class="row">
        {% for playlist in user2.playlists %}
            <h2>{{ playlist.name }}:</h2>
            {% for media in playlist.medias %}
                <div class="col">
                <a href="/media-info/{{ media.media_type }}/{{ media.TMDB_id }}" >{{ media.title }}</a>
                {% for rating in media.ratings %}
                    {% if rating.user_id == user2.user_id %}
                        {% if rating.score == 1 %}
                        <div class="star">★</div>
                        {% elif rating.score == 2 %}
                            <div class="star">★★</div>
                        {% elif rating.score == 3 %}
                            <div class="star">★★★</div>
                        {% elif rating.score == 4 %}
                            <div class="star">★★★★</div>
                        {% elif rating.score == 5 %}
                            <div class="star">★★★★★</div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <img src="https://image.tmdb.org/t/p/original{{ media.poster_path }}">
                </div>
            {% endfor %}
        {% endfor %}
         </div>
    </div>
      
{% endblock %}

{% block js %}
  <script src="/static/js/search_friend_result.js"></script>
{% endblock %}